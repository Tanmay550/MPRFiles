//---------------------------------------------------------------------------

#include <fmx.h>
#include <string>
#include <FireDAC.Phys.SQLite.hpp>
#include <FireDAC.UI.Intf.hpp>


#pragma hdrstop

#include "AdminRegistrationFrom.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.fmx"
TAdminRegistrationForm *AdminRegistrationForm;
//---------------------------------------------------------------------------
__fastcall TAdminRegistrationForm::TAdminRegistrationForm(TComponent* Owner)
	: TForm(Owner)
{

}
//---------------------------------------------------------------------------




void __fastcall TAdminRegistrationForm::RegisterButtonClick(TObject *Sender)
{

	TFDQuery *query = new TFDQuery(NULL);
	String name = NameEditAdminR->Text; // Replace Edit1 with the actual name of your TEdit component.
	String  Username= UsernameEditAdminR->Text; // Replace Edit2 with the actual name of your TEdit component.

// Construct the SQL INSERT statement.
query->SQL->Text = "INSERT INTO Admin (Name,Username) VALUES (:value1, :value2)";

// Bind parameters with user input.
	query->Params->ParamByName("value1")->Value = name;
	query->Params->ParamByName("value2")->Value = Username ;

try {
	// Execute the SQL INSERT statement.
	RegisterConnect->StartTransaction();
	query->ExecSQL();
	ShowMessage("Data inserted successfully."); // Display a success message.
    RegisterConnect->Commit();
} catch (Exception &e) {
	ShowMessage("Error: " + e.Message); // Display an error message if an exception occurs.
    RegisterConnect->Rollback();
}


// Free the query object when done.

delete query;
}
//---------------------------------------------------------------------------

