//---------------------------------------------------------------------------

#include <fmx.h>

#pragma hdrstop

#include "LoginForm.h"
#include "HomePage.h"
#include "AdminRegistrationFrom.h"
#include "TaskListEmployee.h"

//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.fmx"
TLogin *Login;
//---------------------------------------------------------------------------
__fastcall TLogin::TLogin(TComponent* Owner)
	: TForm(Owner)
{

}
//---------------------------------------------------------------------------



void __fastcall TLogin::LoginButtonAClick(TObject *Sender)
{
   String username = UsernameEdit->Text;
    String password = PasswordEdit->Text;

    try {
        // Set up the SQL query to check user credentials.
        FDQuery1->SQL->Text = "SELECT * FROM Users WHERE Username = :username AND Password = :password";
        FDQuery1->Params->ParamByName("username")->Value = username;
        FDQuery1->Params->ParamByName("password")->Value = password;

        // Execute the query.
        FDQuery1->Open();

        // Check if a matching record was found.
        if (!FDQuery1->Eof) {
            // Login successful; show the next form or perform other actions.
            ShowMessage("Login successful!");
            // Open the next form:
			DataPage->Show();
        } else {
            // Login failed; display an error message.
            ShowMessage("Login failed. Please check your username and password.");
        }
    } catch (Exception &e) {
        ShowMessage("Error: " + e.Message);
	}
	FDQuery1->Close();

}


}
//---------------------------------------------------------------------------

void __fastcall TLogin::RegisterButtonClick(TObject *Sender)
{
     AdminRegistrationForm->Show();
}
//---------------------------------------------------------------------------

void __fastcall TLogin::LoginButtonBClick(TObject *Sender)
{
	TaskList->Show();
}
//---------------------------------------------------------------------------



