//---------------------------------------------------------------------------

#include <fmx.h>
#include <string>
#include <FireDAC.Phys.SQLite.hpp>
#include <FireDAC.UI.Intf.hpp>


#pragma hdrstop

#include "AdminRegistrationFrom.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.fmx"
TAdminRegistrationForm *AdminRegistrationForm;
//---------------------------------------------------------------------------
__fastcall TAdminRegistrationForm::TAdminRegistrationForm(TComponent* Owner)
	: TForm(Owner)
{

}
//---------------------------------------------------------------------------





void __fastcall TAdminRegistrationForm::RegisterButtonClick(TObject *Sender)
{

	String name = NameEditAdminR->Text; // Replace Edit1 with the actual name of your TEdit component.
	String  Username= UsernameEditAdminR->Text; // Replace Edit2 with the actual name of your TEdit component.

// Construct the SQL INSERT statement.
FDQuery1->SQL->Text = "INSERT INTO Admin (Name, Username) VALUES (:value1, :value2)";


// Bind parameters with user input.
	FDQuery1->Params->ParamByName("value1")->Value = name;
	FDQuery1->Params->ParamByName("value2")->Value = Username ;

try {
    Sqlite_demoConnection->Connected = true;
	// Execute the SQL INSERT statement.
    FDQuery1->Active = true;
	Sqlite_demoConnection->StartTransaction();
	FDQuery1->ExecSQL();
	ShowMessage("Data inserted successfully."); // Display a success message.
	Sqlite_demoConnection->Commit();
} catch (Exception &e) {
	ShowMessage("Error: " + e.Message); // Display an error message if an exception occurs.
    Sqlite_demoConnection->Rollback();
}


// Free the query object when done.

FDQuery1->Close();
}
//---------------------------------------------------------------------------

